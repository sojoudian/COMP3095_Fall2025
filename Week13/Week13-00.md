# Critical Fixes for Week 13

## Overview

This guide contains critical bug fixes that must be applied before proceeding with Week 13 implementation.

**Time:** 5 minutes

---

## Prerequisites

- ✅ All previous weeks completed
- ✅ Project accessible at `/Users/maziar/del_prep/comp3095_fall2025_11am`

---

## Step 1: Fix Inventory Service Database Name Mismatch

### 1.1 Update application-docker.properties

**Location:** `inventory-service/src/main/resources/application-docker.properties`

Change the database name from hyphen to underscore:

```properties
# Change this line:
spring.datasource.url=jdbc:postgresql://postgres-inventory:5433/inventory-service

# To this:
spring.datasource.url=jdbc:postgresql://postgres-inventory:5433/inventory_service
```

**Why?**

PostgreSQL creates the database as `inventory_service` (with underscore) based on docker-compose.yml and init scripts. The application must use the exact same name to connect. Using `inventory-service` (with hyphen) will cause connection failures with error: `database "inventory-service" does not exist`.

**How the database is created:**

1. **docker-compose.yml** sets: `POSTGRES_DB: inventory_service`
2. **init.sql** creates: `CREATE DATABASE inventory_service;`
3. **Application must connect to**: `inventory_service` (same name!)

---

## Verification

After making this change, verify the configuration is consistent:

```bash
cd /Users/maziar/del_prep/comp3095_fall2025_11am/microservices-parent

# Check docker-compose creates inventory_service
grep "POSTGRES_DB.*inventory" docker-compose.yml

# Check application connects to inventory_service
grep "spring.datasource.url" inventory-service/src/main/resources/application-docker.properties
```

Expected output should show `inventory_service` (underscore) in both places.

---

## Summary

You have:

- ✅ Fixed critical database name mismatch in inventory-service
- ✅ Ensured application connects to the correct database name
- ✅ Prevented "database does not exist" errors on startup

**Next Steps:**

Proceed with Week 13-1: Migrating from OpenFeign to Spring REST Client
